<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Automatic Unit Handling for Numeric Vectors • measure</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Automatic Unit Handling for Numeric Vectors">
<meta name="description" content="Adds a new class measure for which methods of base functions, such as arithmetic and comparative operators and summary functions, are defined such that the units of measure objects are automatically updated. Allows conversion between units, is compatible with various time interval objects, e.g. lubridate periods, and has custom `ggplot2` scales.">
<meta property="og:description" content="Adds a new class measure for which methods of base functions, such as arithmetic and comparative operators and summary functions, are defined such that the units of measure objects are automatically updated. Allows conversion between units, is compatible with various time interval objects, e.g. lubridate periods, and has custom `ggplot2` scales.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">measure</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="measure">measure<a class="anchor" aria-label="anchor" href="#measure"></a>
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>The goal of measure is to integrate automatic unit handling into data analysis workflows.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of measure like so:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"hrryt/measure"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://hrryt.github.io/measure/">measure</a></span><span class="op">)</span></span></code></pre></div>
<p>Use <code><a href="reference/measure.html">measure()</a></code> to make new <code>measure</code> objects and to convert between units.</p>
<p>Units are handled for you when carrying out arithmetic operations.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bodyindex</span> <span class="op">&lt;-</span> <span class="va">starwars</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    mass <span class="op">=</span> <span class="fu"><a href="reference/measure.html">measure</a></span><span class="op">(</span><span class="va">mass</span>, <span class="st">"kg"</span><span class="op">)</span>, <span class="co"># add units to a measurement</span></span>
<span>    height <span class="op">=</span> <span class="fu"><a href="reference/measure.html">measure</a></span><span class="op">(</span><span class="va">height</span>, <span class="st">"c|m"</span><span class="op">)</span>, <span class="co"># vertical bar indicates SI prefix</span></span>
<span>    bmi0 <span class="op">=</span> <span class="va">mass</span> <span class="op">/</span> <span class="va">height</span><span class="op">^</span><span class="fl">2</span>, <span class="co"># arithmetic operators preserve units</span></span>
<span>    bmi <span class="op">=</span> <span class="fu"><a href="reference/measure.html">measure</a></span><span class="op">(</span><span class="va">bmi0</span>, <span class="st">"kg m^-2"</span><span class="op">)</span> <span class="co"># convert units</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">name</span><span class="op">:</span><span class="va">mass</span>, <span class="va">bmi0</span><span class="op">:</span><span class="va">bmi</span><span class="op">)</span></span>
<span></span>
<span><span class="va">bodyindex</span> <span class="op">|&gt;</span> <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">mass</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode">
<pre class="sourceCode"><code class="sourceCode">#&gt; <span style="color: #555555;"># A tibble: 87 × 5</span>
#&gt;    name                     height      mass             bmi0           bmi
#&gt;    <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #555555; font-style: italic;">&lt;measure&gt;</span> <span style="color: #555555; font-style: italic;">&lt;measure&gt;</span>        <span style="color: #555555; font-style: italic;">&lt;measure&gt;</span>     <span style="color: #555555; font-style: italic;">&lt;measure&gt;</span>
#&gt; <span style="color: #555555;"> 1</span> Jabba Desilijic Tiure    175 <span style="color: #555555;">cm</span>   <span style="text-decoration: underline;">1</span>358 <span style="color: #555555;">kg</span> 0.044<span style="text-decoration: underline;">3</span>  <span style="color: #555555;">kg cm^-2</span> 443.  <span style="color: #555555;">kg m^-2</span>
#&gt; <span style="color: #555555;"> 2</span> Grievous                 216 <span style="color: #555555;">cm</span>    159 <span style="color: #555555;">kg</span> 0.003<span style="text-decoration: underline;">41</span> <span style="color: #555555;">kg cm^-2</span>  34.1 <span style="color: #555555;">kg m^-2</span>
#&gt; <span style="color: #555555;"> 3</span> IG-88                    200 <span style="color: #555555;">cm</span>    140 <span style="color: #555555;">kg</span> 0.003<span style="text-decoration: underline;">5</span>  <span style="color: #555555;">kg cm^-2</span>  35   <span style="color: #555555;">kg m^-2</span>
#&gt; <span style="color: #555555;"> 4</span> Darth Vader              202 <span style="color: #555555;">cm</span>    136 <span style="color: #555555;">kg</span> 0.003<span style="text-decoration: underline;">33</span> <span style="color: #555555;">kg cm^-2</span>  33.3 <span style="color: #555555;">kg m^-2</span>
#&gt; <span style="color: #555555;"> 5</span> Tarfful                  234 <span style="color: #555555;">cm</span>    136 <span style="color: #555555;">kg</span> 0.002<span style="text-decoration: underline;">48</span> <span style="color: #555555;">kg cm^-2</span>  24.8 <span style="color: #555555;">kg m^-2</span>
#&gt; <span style="color: #555555;"> 6</span> Owen Lars                178 <span style="color: #555555;">cm</span>    120 <span style="color: #555555;">kg</span> 0.003<span style="text-decoration: underline;">79</span> <span style="color: #555555;">kg cm^-2</span>  37.9 <span style="color: #555555;">kg m^-2</span>
#&gt; <span style="color: #555555;"> 7</span> Bossk                    190 <span style="color: #555555;">cm</span>    113 <span style="color: #555555;">kg</span> 0.003<span style="text-decoration: underline;">13</span> <span style="color: #555555;">kg cm^-2</span>  31.3 <span style="color: #555555;">kg m^-2</span>
#&gt; <span style="color: #555555;"> 8</span> Chewbacca                228 <span style="color: #555555;">cm</span>    112 <span style="color: #555555;">kg</span> 0.002<span style="text-decoration: underline;">15</span> <span style="color: #555555;">kg cm^-2</span>  21.5 <span style="color: #555555;">kg m^-2</span>
#&gt; <span style="color: #555555;"> 9</span> Jek Tono Porkins         180 <span style="color: #555555;">cm</span>    110 <span style="color: #555555;">kg</span> 0.003<span style="text-decoration: underline;">40</span> <span style="color: #555555;">kg cm^-2</span>  34.0 <span style="color: #555555;">kg m^-2</span>
#&gt; <span style="color: #555555;">10</span> Dexter Jettster          198 <span style="color: #555555;">cm</span>    102 <span style="color: #555555;">kg</span> 0.002<span style="text-decoration: underline;">60</span> <span style="color: #555555;">kg cm^-2</span>  26.0 <span style="color: #555555;">kg m^-2</span>
#&gt; <span style="color: #555555;"># ℹ 77 more rows</span>
</code></pre>
</div>
<p>Units are automatically annotated onto <code>ggplot2</code> plots with ‘enmeasured’ scales.</p>
<p>Every <code>ggplot2</code> scale has a <code>*_measure</code> equivalent.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">breaks</span> <span class="op">&lt;-</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/breaks_extended.html" class="external-link">breaks_extended</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span></span>
<span></span>
<span><span class="va">bodyindex</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">mass</span> <span class="op">&lt;</span> <span class="fu"><a href="reference/measure.html">measure</a></span><span class="op">(</span><span class="fl">200</span>, <span class="st">"kg"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">mass</span>, <span class="va">height</span>, color <span class="op">=</span> <span class="va">bmi</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># two methods of achieving the same thing:</span></span>
<span>  <span class="fu">scale_x_log10</span><span class="op">(</span>breaks <span class="op">=</span> <span class="va">breaks</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="reference/enmeasure_scale.html">enmeasure_scale</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="reference/scale_measure.html">scale_y_log10_measure</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="va">breaks</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># units are appended onto the label of an 'enmeasured' scale:</span></span>
<span>  <span class="fu"><a href="reference/scale_measure.html">scale_color_viridis_c_measure</a></span><span class="op">(</span>trans <span class="op">=</span> <span class="st">"log10"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"BMI"</span>, title <span class="op">=</span> <span class="st">"Body Mass Index of Star Wars Characters"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-ggplot2-1.png" width="100%"></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">plays</span> <span class="op">&lt;-</span> <span class="va">lakers</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">tibble</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    date <span class="op">=</span> <span class="fu">ymd</span><span class="op">(</span><span class="va">date</span><span class="op">)</span>,</span>
<span>    time <span class="op">=</span> <span class="fu">ms</span><span class="op">(</span><span class="va">time</span><span class="op">)</span>,</span>
<span>    <span class="va">team</span>,</span>
<span>    points <span class="op">=</span> <span class="fu"><a href="reference/measure.html">measure</a></span><span class="op">(</span><span class="va">points</span>, <span class="st">"point"</span><span class="op">)</span>,</span>
<span>    .keep <span class="op">=</span> <span class="st">"used"</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode">
<pre class="sourceCode"><code class="sourceCode">#&gt; <span style="color: #555555;"># A tibble: 34,624 × 4</span>
#&gt;    date       time     team     points
#&gt;    <span style="color: #555555; font-style: italic;">&lt;date&gt;</span>     <span style="color: #555555; font-style: italic;">&lt;Period&gt;</span> <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span> <span style="color: #555555; font-style: italic;">&lt;measure&gt;</span>
#&gt; <span style="color: #555555;"> 1</span> 2008-10-28 12M 0S   OFF     0 <span style="color: #555555;">point</span>
#&gt; <span style="color: #555555;"> 2</span> 2008-10-28 11M 39S  LAL     0 <span style="color: #555555;">point</span>
#&gt; <span style="color: #555555;"> 3</span> 2008-10-28 11M 37S  LAL     0 <span style="color: #555555;">point</span>
#&gt; <span style="color: #555555;"> 4</span> 2008-10-28 11M 25S  LAL     0 <span style="color: #555555;">point</span>
#&gt; <span style="color: #555555;"> 5</span> 2008-10-28 11M 23S  LAL     0 <span style="color: #555555;">point</span>
#&gt; <span style="color: #555555;"> 6</span> 2008-10-28 11M 22S  LAL     2 <span style="color: #555555;">point</span>
#&gt; <span style="color: #555555;"> 7</span> 2008-10-28 11M 22S  POR     0 <span style="color: #555555;">point</span>
#&gt; <span style="color: #555555;"> 8</span> 2008-10-28 11M 22S  LAL     1 <span style="color: #555555;">point</span>
#&gt; <span style="color: #555555;"> 9</span> 2008-10-28 11M 0S   LAL     0 <span style="color: #555555;">point</span>
#&gt; <span style="color: #555555;">10</span> 2008-10-28 10M 53S  POR     2 <span style="color: #555555;">point</span>
#&gt; <span style="color: #555555;"># ℹ 34,614 more rows</span>
</code></pre>
</div>
<p><code>measure</code> works seamlessly with <code>difftime</code> and <code>hms</code> objects, and <code>lubridate</code> periods, intervals and durations.</p>
<p>Unlike most time objects, <code>measure</code> units are preserved through summary functions.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plays</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>time <span class="op">=</span> <span class="fu"><a href="reference/measure.html">measure</a></span><span class="op">(</span><span class="va">time</span>, <span class="st">"min"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">date</span>, <span class="va">team</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">summarise</span><span class="op">(</span></span>
<span>    time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span>,</span>
<span>    points <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">points</span><span class="op">)</span>,</span>
<span>    rate <span class="op">=</span> <span class="va">points</span> <span class="op">/</span> <span class="va">time</span>,</span>
<span>    .groups <span class="op">=</span> <span class="st">"keep"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">team</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">summarise</span><span class="op">(</span></span>
<span>    time <span class="op">=</span> <span class="fu">first</span><span class="op">(</span><span class="va">time</span><span class="op">)</span>,</span>
<span>    points <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">points</span><span class="op">)</span>,</span>
<span>    rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">rate</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="sourceCode">
<pre class="sourceCode"><code class="sourceCode">#&gt; <span style="color: #555555;"># A tibble: 31 × 4</span>
#&gt;    team       time      points              rate
#&gt;    <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span> <span style="color: #555555; font-style: italic;">&lt;measure&gt;</span>   <span style="color: #555555; font-style: italic;">&lt;measure&gt;</span>         <span style="color: #555555; font-style: italic;">&lt;measure&gt;</span>
#&gt; <span style="color: #555555;"> 1</span> ATL    11.7 <span style="color: #555555;">min</span>  84.5 <span style="color: #555555;">point</span> 7.21 <span style="color: #555555;">point min^-1</span>
#&gt; <span style="color: #555555;"> 2</span> BOS    11.8 <span style="color: #555555;">min</span>  96   <span style="color: #555555;">point</span> 8.13 <span style="color: #555555;">point min^-1</span>
#&gt; <span style="color: #555555;"> 3</span> CHA    11.8 <span style="color: #555555;">min</span>  94   <span style="color: #555555;">point</span> 7.93 <span style="color: #555555;">point min^-1</span>
#&gt; <span style="color: #555555;"> 4</span> CHI    11.7 <span style="color: #555555;">min</span> 109   <span style="color: #555555;">point</span> 9.26 <span style="color: #555555;">point min^-1</span>
#&gt; <span style="color: #555555;"> 5</span> CLE    11.8 <span style="color: #555555;">min</span>  89.5 <span style="color: #555555;">point</span> 7.63 <span style="color: #555555;">point min^-1</span>
#&gt; <span style="color: #555555;"> 6</span> DAL    11.9 <span style="color: #555555;">min</span> 102   <span style="color: #555555;">point</span> 8.45 <span style="color: #555555;">point min^-1</span>
#&gt; <span style="color: #555555;"> 7</span> DEN    11.8 <span style="color: #555555;">min</span>  92.5 <span style="color: #555555;">point</span> 7.92 <span style="color: #555555;">point min^-1</span>
#&gt; <span style="color: #555555;"> 8</span> DET    11.8 <span style="color: #555555;">min</span>  91.5 <span style="color: #555555;">point</span> 7.76 <span style="color: #555555;">point min^-1</span>
#&gt; <span style="color: #555555;"> 9</span> GSW    11.8 <span style="color: #555555;">min</span> 111   <span style="color: #555555;">point</span> 9.01 <span style="color: #555555;">point min^-1</span>
#&gt; <span style="color: #555555;">10</span> HOU    11.8 <span style="color: #555555;">min</span>  89.8 <span style="color: #555555;">point</span> 7.55 <span style="color: #555555;">point min^-1</span>
#&gt; <span style="color: #555555;"># ℹ 21 more rows</span>
</code></pre>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing measure</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Harry Thompson <br><small class="roles"> Maintainer, author </small>   </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Harry Thompson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
